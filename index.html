<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Simple Calendar - Two Days Ahead or Next Monday</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 10px;
    position: relative;
  }.calendar {
display: grid;
grid-template-columns: repeat(7, 1fr);
gap: 4px;
font-size: 0.9em;
}.header {
font-weight: bold;
text-align: center;
}.day {
width: 30px;
height: 30px;
line-height: 30px;
text-align: center;
border-radius: 4px;
cursor: default;
}.day.booked {
color: #ccc;
background-color: #e0e0e0;
cursor: not-allowed;
text-decoration: line-through;
}.day.enabled {
background-color: #f0f0f0;
cursor: pointer;
}/* Optional: hover effect for enabled days */
.day.enabled:hover {
background-color: #ddd;
}/* Confirmation popup style */
#confirmationPopup {
position: fixed;
bottom: 20px;
left: 50%;
transform: translateX(-50%);
background-color: #333;
color: white;
padding: 10px 15px;
border-radius: 6px;
font-size: 0.9em;
opacity: 0;
pointer-events: none;
transition: opacity 0.3s ease;
z-index: 9999;
display: flex;
align-items: center;
gap: 10px;
}#confirmationPopup.show {
opacity: 1;
pointer-events: auto;
}#confirmationPopup button {
background: #555;
color: white;
border: none;
border-radius: 4px;
padding: 4px 8px;
cursor: pointer;
font-size: 0.85em;
}#confirmationPopup button:hover {
background: #777;
}
</style></head>
<body><div id="calendarContainer"></div><!-- Confirmation popup --><div id="confirmationPopup">
  <span id="confirmationMessage"></span>
  <button id="closePopupBtn">OK</button>
</div><script>
(function() {
  const container = document.getElementById('calendarContainer');
  const confirmationPopup = document.getElementById('confirmationPopup');
  const confirmationMessage = document.getElementById('confirmationMessage');
  const closePopupBtn = document.getElementById('closePopupBtn');
  let date = null; // variable to save selected date

  const today = new Date();

  // Calculate candidate date 2 days ahead
  const candidateDate = new Date(today);
  candidateDate.setDate(candidateDate.getDate() + 2);

  // If candidate falls on Saturday (6) or Sunday (0), set to next Monday
  const candidateDay = candidateDate.getDay();
  if (candidateDay === 6) {
    // Saturday -> add 2 days to Monday
    candidateDate.setDate(candidateDate.getDate() + 2);
  } else if (candidateDay === 0) {
    // Sunday -> add 1 day to Monday
    candidateDate.setDate(candidateDate.getDate() + 1);
  }

  const targetYear = candidateDate.getFullYear();
  const targetMonth = candidateDate.getMonth();
  const targetDay = candidateDate.getDate();

  // Build calendar for the current month only
  const currentYear = today.getFullYear();
  const currentMonth = today.getMonth();

  const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
  const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);
  const totalDays = lastDayOfMonth.getDate();

  const startDay = firstDayOfMonth.getDay();

  const daysArray = [];

  for (let i = 0; i < startDay; i++) {
    daysArray.push(null);
  }

  for (let d = 1; d <= totalDays; d++) {
    daysArray.push(d);
  }

  const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  const calendarDiv = document.createElement('div');
  calendarDiv.className = 'calendar';

  weekdays.forEach(day => {
    const headerCell = document.createElement('div');
    headerCell.className = 'header';
    headerCell.textContent = day;
    calendarDiv.appendChild(headerCell);
  });

  closePopupBtn.addEventListener('click', () => {
    confirmationPopup.classList.remove('show');

    // Close the webview after user dismisses confirmation
    if (window.ReactNativeWebView && window.ReactNativeWebView.postMessage) {
      window.ReactNativeWebView.postMessage('close');
    }
    if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.close) {
      window.webkit.messageHandlers.close.postMessage('close');
    }
    setTimeout(() => {
      window.close();
    }, 50);
  });

  daysArray.forEach(day => {
    const dayDiv = document.createElement('div');
    dayDiv.className = 'day';

    if (day === null) {
      dayDiv.innerHTML = '&nbsp;';
    } else {
      // Enable only the target day, all others booked
      const isTargetDay =
        day === targetDay &&
        currentMonth === targetMonth &&
        currentYear === targetYear;

      if (isTargetDay) {
        dayDiv.className += ' enabled';
        dayDiv.textContent = day;

        dayDiv.addEventListener('click', () => {
          date = new Date(targetYear, targetMonth, day);
          // Format date as DD.MM.YYYY
          const dayStr = String(date.getDate()).padStart(2, '0');
          const monthStr = String(date.getMonth() + 1).padStart(2, '0');
          const yearStr = date.getFullYear();
          const formattedDate = `${dayStr}.${monthStr}.${yearStr}`;

          confirmationMessage.textContent = 'Selected date: ' + formattedDate;
          confirmationPopup.classList.add('show');
        });
      } else {
        dayDiv.className += ' booked';
        dayDiv.textContent = day;
      }
    }

    calendarDiv.appendChild(dayDiv);
  });

  container.appendChild(calendarDiv);
})();
</script></body>
</html>
